<?php namespace App\Http\Controllers; use App\Models\Booking; use Illuminate\Http\Request; class Roombook extends Controller { public function _show() { $bookings = Booking::with(['user', 'room'])->latest()->get(); return response()->json($bookings); } public function _store(Request $request) { $validated = $request->validate([ 'user_id' => 'required|exists:users,id', 'room_id' => 'required|exists:rooms,id', 'check_in' => 'required|date', 'check_out' => 'required|date|after:check_in' ]); $booking = Booking::create($validated); return response()->json($booking, 201); } public function _delete(Request $request) { $booking = Booking::findOrFail($request->booking_id); $booking->delete(); return response()->json(['message' => 'Booking deleted successfully']); } public function _confirm(Request $request) { $booking = Booking::findOrFail($request->booking_id); $booking->update(['status' => 'confirmed']); return response()->json($booking); } } 