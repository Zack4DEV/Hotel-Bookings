<?php namespace App\Http\Controllers; use App\Models\Payment; use App\Models\Booking; use Illuminate\Http\Request; class Payment extends Controller { public function _show() { $payments = Payment::with(['booking.user', 'booking.room'])->latest()->get(); return response()->json($payments); } public function _store(Request $request) { $validated = $request->validate([ 'booking_id' => 'required|exists:bookings,id', 'amount' => 'required|numeric', 'payment_method' => 'required|string' ]); $payment = Payment::create($validated); return response()->json($payment, 201); } public function _migrate() { $payments = Payment::with(['booking.user', 'booking.room']) ->where('status', 'completed') ->get(); return response()->json($payments); } } 