<?php use Illuminate\Support\Facades\Route; use Maatwebsite\Excel\Facades\Excel; // API Routes Route::prefix('api')->group(function () { // Auth Routes Route::post('/login', 'App\Http\Controllers\Users@_users'); Route::post('/logout', 'App\Http\Controllers\Users@_logout'); // Protected Routes Route::middleware(['auth:sanctum'])->group(function () { // User Routes Route::prefix('user')->group(function () { Route::post('/book-room', 'App\Http\Controllers\Users@_store'); }); // Admin Routes Route::prefix('admin')->middleware(['admin'])->group(function () { Route::get('/dashboard', 'App\Http\Controllers\Admin@_show'); Route::get('/export', function () { return Excel::download(new RoombookExport, 'roombook.xlsx'); }); // Roombook Routes Route::prefix('roombook')->group(function () { Route::get('/', 'App\Http\Controllers\Roombook@_show'); Route::post('/add', 'App\Http\Controllers\Roombook@_store'); Route::post('/delete', 'App\Http\Controllers\Roombook@_delete'); Route::post('/confirm', 'App\Http\Controllers\Roombook@_confirm'); Route::get('/edit', 'App\Http\Controllers\Roombook@_show'); Route::post('/edit', 'App\Http\Controllers\RoombookEdit@_update'); }); // Payment Routes Route::prefix('payment')->group(function () { Route::get('/', 'App\Http\Controllers\Payment@_show'); Route::post('/', 'App\Http\Controllers\Payment@_store'); Route::get('/invoice', 'App\Http\Controllers\Payment@_migrate'); }); // Room Routes Route::prefix('room')->group(function () { Route::get('/', 'App\Http\Controllers\Room@_room'); Route::post('/add', 'App\Http\Controllers\Room@_store'); Route::post('/delete', 'App\Http\Controllers\Room@_delete'); }); // Staff Routes Route::prefix('staff')->group(function () { Route::get('/', 'App\Http\Controllers\Staff@_staff'); Route::post('/add', 'App\Http\Controllers\Staff@_store'); Route::post('/delete', 'App\Http\Controllers\Staff@_delete'); }); }); }); }); // Serve React App Route::get('/{any}', function () { return view('application'); })->where('any', '.*');